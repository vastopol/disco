#!/bin/bash

# this is the driver for the other programs
# eventually when assembler done -a flag
# also might figure out how to integrate lcc/lc3tools

# help prompt
if [ "$1" = "-h" ] ; then
    echo "Help"
    echo "Usage:"
    echo "  $ ./disco -flag arguments"
    echo "Flags:"
    echo "  -d  = Disassemble"
    echo "  -c0 = Convert bin to hex"
    echo "  -c1 = Convert hex to bin"
    exit 0
fi

# error check for flag and file >= 1
if   [ $# -lt 2 ] ; then
      echo "Error: Missing Arguments"
      echo "Usage: ./disco -flag arguments"
      exit 1
fi

# separate flag and files
FLAG="$1"
ARG_ARRAY=("$@")
FILES=("${ARG_ARRAY[@]:1}")

# run sub programs with args
if   [ "$FLAG" = "-d" ] ; then
      ./lc3_dis.py "${FILES[@]}"
      exit 0
elif [ "$FLAG" = "-c0" ] ; then
      ./lc3_conv.py 0 "${FILES[@]}"
      exit 0
elif [ "$FLAG" = "-c1" ] ; then
      ./lc3_conv.py 1 "${FILES[@]}"
      exit 0
fi

# last error check
echo "Error: Unknown flag"
exit 1
